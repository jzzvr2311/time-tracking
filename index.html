<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3B82F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Time Tracking">
    <title>Biometric Time Tracking</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body {
            margin: 0;
            padding: 0;
            overscroll-behavior: none;
            -webkit-user-select: none;
            user-select: none;
        }
        .app-container {
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        input, select, button, textarea {
            -webkit-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const Lock = () => (
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
        );

        const App = () => {
            const [inputCode, setInputCode] = useState('');
            const [inputToken, setInputToken] = useState('');
            const [needsToken, setNeedsToken] = useState(false);

            const handleLogin = () => {
                if (inputCode.length < 4) {
                    alert('Access code must be at least 4 characters');
                    return;
                }
                
                const savedToken = localStorage.getItem('github-token');
                if (!savedToken) {
                    setNeedsToken(true);
                } else {
                    alert('Login successful! (Full app coming next)');
                }
            };

            const handleTokenSetup = () => {
                if (inputToken.length < 20) {
                    alert('Please enter a valid GitHub token');
                    return;
                }
                localStorage.setItem('github-token', inputToken);
                alert('Token saved! Refreshing...');
                window.location.reload();
            };

            if (needsToken) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                            <div className="text-center mb-8">
                                <div className="flex justify-center mb-4">
                                    <div className="bg-purple-100 p-4 rounded-full">
                                        <Lock />
                                    </div>
                                </div>
                                <h1 className="text-3xl font-bold text-gray-800">GitHub Setup</h1>
                                <p className="text-gray-600 mt-2">First time setup - needed once</p>
                            </div>

                            <div className="space-y-4">
                                <div className="bg-purple-50 border border-purple-200 rounded-xl p-4 text-sm">
                                    <p className="font-bold text-purple-900 mb-2">üìã Quick Setup:</p>
                                    <ol className="space-y-1 text-purple-800 text-xs">
                                        <li>1. Go to github.com/settings/tokens</li>
                                        <li>2. Click "Generate new token (classic)"</li>
                                        <li>3. Name it: Time Tracking</li>
                                        <li>4. Check ONLY "gist" permission</li>
                                        <li>5. Generate & copy the token</li>
                                        <li>6. Paste it below</li>
                                    </ol>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">GitHub Token</label>
                                    <textarea
                                        value={inputToken}
                                        onChange={(e) => setInputToken(e.target.value)}
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm font-mono"
                                        placeholder="ghp_xxxxxxxxxxxx"
                                        rows="3"
                                    />
                                    <p className="text-xs text-gray-500 mt-2">
                                        üîí Stored securely on your device only
                                    </p>
                                </div>

                                <button
                                    onClick={handleTokenSetup}
                                    className="w-full py-3 bg-purple-500 hover:bg-purple-600 text-white font-bold rounded-xl transition-colors text-lg"
                                >
                                    Complete Setup
                                </button>

                                <button
                                    onClick={() => setNeedsToken(false)}
                                    className="w-full py-2 text-gray-600 hover:text-gray-800"
                                >
                                    ‚Üê Back
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                        <div className="text-center mb-8">
                            <div className="flex justify-center mb-4">
                                <div className="bg-blue-100 p-4 rounded-full">
                                    <Lock />
                                </div>
                            </div>
                            <h1 className="text-3xl font-bold text-gray-800">Time Tracking</h1>
                            <p className="text-gray-600 mt-2">Enter your access code</p>
                        </div>

                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Access Code</label>
                                <input
                                    type="password"
                                    value={inputCode}
                                    onChange={(e) => setInputCode(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg text-center"
                                    placeholder="Enter your code"
                                    autoFocus
                                />
                                <p className="text-xs text-gray-500 mt-2 text-center">
                                    Minimum 4 characters
                                </p>
                            </div>

                            <button
                                onClick={handleLogin}
                                className="w-full py-3 bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-xl transition-colors text-lg"
                            >
                                Access
                            </button>
                        </div>

                        <div className="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-xl text-sm text-blue-800">
                            <p className="font-semibold mb-2">üí° Testing Version:</p>
                            <p className="text-xs">This is a simplified test. If you see this screen, the app is loading correctly!</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
