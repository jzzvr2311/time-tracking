<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#3B82F6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Time Tracking">
    <title>Biometric Time Tracking</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body {
            margin: 0;
            padding: 0;
            overscroll-behavior: none;
            -webkit-user-select: none;
            user-select: none;
        }
        .app-container {
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        input, select, button, textarea {
            -webkit-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const Clock = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Download = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        const LogIn = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" y1="12" x2="3" y2="12"></line>
            </svg>
        );

        const LogOut = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
        );

        const Trash2 = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Filter = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
        );

        const X = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Settings = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M12 1v6m0 6v6m0-18l-2.5 2.5M12 1l2.5 2.5M1 12h6m6 0h6M1 12l2.5-2.5M1 12l2.5 2.5m18.5-2.5l-2.5-2.5m2.5 2.5l-2.5 2.5M12 23l-2.5-2.5M12 23l2.5-2.5"></path>
            </svg>
        );

        const Cloud = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
            </svg>
        );

        const BiometricTimeTracking = () => {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [employeeName, setEmployeeName] = useState('Jazzver Lotoc');
            const [timeInRecorded, setTimeInRecorded] = useState(null);
            const [timeOutRecorded, setTimeOutRecorded] = useState(null);
            const [records, setRecords] = useState([]);
            const [showNotification, setShowNotification] = useState(false);
            const [notificationMessage, setNotificationMessage] = useState('');
            const [isLoading, setIsLoading] = useState(true);
            const [filterDate, setFilterDate] = useState('');
            const [filterDay, setFilterDay] = useState('');
            const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
            const [showClearConfirm, setShowClearConfirm] = useState(false);
            const [recordToDelete, setRecordToDelete] = useState(null);
            const [showFilters, setShowFilters] = useState(false);
            const [showSettings, setShowSettings] = useState(false);
            const [githubToken, setGithubToken] = useState('');
            const [gistId, setGistId] = useState('');
            const [isSyncing, setIsSyncing] = useState(false);
            const [syncEnabled, setSyncEnabled] = useState(false);
            const [showTimeInConfirm, setShowTimeInConfirm] = useState(false);
            const [showTimeOutConfirm, setShowTimeOutConfirm] = useState(false);
            const [showExportConfirm, setShowExportConfirm] = useState(false);

            useEffect(() => {
                loadLocalData();
                loadSyncSettings();
            }, []);

            const loadSyncSettings = () => {
                const token = localStorage.getItem('github-token');
                const gist = localStorage.getItem('gist-id');
                if (token && gist) {
                    setGithubToken(token);
                    setGistId(gist);
                    setSyncEnabled(true);
                }
            };

            const loadLocalData = () => {
                try {
                    const stored = localStorage.getItem('time-tracking-records');
                    if (stored) {
                        const data = JSON.parse(stored);
                        setRecords(data.records || []);
                        setEmployeeName(data.employeeName || 'Jazzver Lotoc');
                    }
                } catch (error) {
                    console.log('No existing data found, starting fresh');
                }
                setIsLoading(false);
            };

            const saveLocalData = (newRecords, empName) => {
                try {
                    const data = {
                        records: newRecords,
                        employeeName: empName
                    };
                    localStorage.setItem('time-tracking-records', JSON.stringify(data));
                } catch (error) {
                    console.error('Error saving data:', error);
                }
            };

            const syncToGitHub = async (newRecords, empName) => {
                if (!syncEnabled || !githubToken || !gistId) {
                    console.log('Sync skipped - not enabled or missing credentials');
                    return;
                }

                setIsSyncing(true);
                try {
                    const data = {
                        records: newRecords,
                        employeeName: empName,
                        lastSync: new Date().toISOString()
                    };

                    console.log('Syncing to gist:', gistId);
                    const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                        method: 'PATCH',
                        headers: {
                            'Authorization': `token ${githubToken}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            files: {
                                'time-tracking-data.json': {
                                    content: JSON.stringify(data, null, 2)
                                }
                            }
                        })
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('Sync failed:', response.status, errorText);
                        throw new Error('Sync failed');
                    }
                    
                    console.log('Sync successful');
                    showNotif('‚úì Synced to cloud');
                } catch (error) {
                    console.error('Sync error:', error);
                    showNotif('‚ùå Sync failed');
                } finally {
                    setIsSyncing(false);
                }
            };

            const loadFromGitHub = async () => {
                if (!githubToken || !gistId) {
                    showNotif('‚ùå Missing token or gist ID');
                    return;
                }

                setIsSyncing(true);
                try {
                    console.log('Loading from gist:', gistId);
                    const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                        headers: {
                            'Authorization': `token ${githubToken}`,
                        }
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('Load failed:', response.status, errorText);
                        throw new Error('Load failed');
                    }

                    const gist = await response.json();
                    console.log('Gist loaded:', gist);
                    const fileContent = gist.files['time-tracking-data.json']?.content;
                    
                    if (fileContent) {
                        const data = JSON.parse(fileContent);
                        console.log('Data loaded:', data);
                        setRecords(data.records || []);
                        setEmployeeName(data.employeeName || 'Jazzver Lotoc');
                        saveLocalData(data.records || [], data.employeeName || 'Jazzver Lotoc');
                        showNotif(`‚úì Loaded ${data.records?.length || 0} records`);
                    } else {
                        showNotif('‚ùå No data file found');
                    }
                } catch (error) {
                    console.error('Load error:', error);
                    showNotif('‚ùå Load failed - check token');
                } finally {
                    setIsSyncing(false);
                }
            };

            const setupSync = async () => {
                if (!githubToken) {
                    showNotif('Please enter GitHub token');
                    return;
                }

                setIsSyncing(true);
                try {
                    // If user provided a Gist ID, use it
                    if (gistId) {
                        // Verify the gist exists
                        const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                            headers: {
                                'Authorization': `token ${githubToken}`,
                            }
                        });

                        if (!response.ok) {
                            throw new Error('Invalid Gist ID or token');
                        }

                        // Save settings
                        localStorage.setItem('github-token', githubToken);
                        localStorage.setItem('gist-id', gistId);
                        setSyncEnabled(true);
                        setShowSettings(false);
                        showNotif('‚úì Sync enabled with existing gist!');
                    } else {
                        // Create new gist
                        const data = {
                            records: records,
                            employeeName: employeeName,
                            lastSync: new Date().toISOString()
                        };

                        const response = await fetch('https://api.github.com/gists', {
                            method: 'POST',
                            headers: {
                                'Authorization': `token ${githubToken}`,
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                description: 'Time Tracking Data - Private',
                                public: false,
                                files: {
                                    'time-tracking-data.json': {
                                        content: JSON.stringify(data, null, 2)
                                    }
                                }
                            })
                        });

                        if (!response.ok) {
                            throw new Error('Failed to create gist');
                        }

                        const gist = await response.json();
                        const newGistId = gist.id;
                        
                        // Save settings
                        setGistId(newGistId);
                        localStorage.setItem('github-token', githubToken);
                        localStorage.setItem('gist-id', newGistId);
                        setSyncEnabled(true);
                        setShowSettings(false);
                        showNotif('‚úì New gist created and sync enabled!');
                    }
                } catch (error) {
                    console.error('Setup error:', error);
                    showNotif('‚ùå Setup failed - check token/gist ID');
                } finally {
                    setIsSyncing(false);
                }
            };

            const disableSync = () => {
                localStorage.removeItem('github-token');
                localStorage.removeItem('gist-id');
                setGithubToken('');
                setGistId('');
                setSyncEnabled(false);
                showNotif('Sync disabled');
            };

            const saveData = (newRecords, empName) => {
                saveLocalData(newRecords, empName);
                if (syncEnabled) {
                    syncToGitHub(newRecords, empName);
                }
            };

            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            const formatTime = (date) => {
                return date.toLocaleTimeString('en-US', { 
                    hour12: false,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            };

            const formatDate = (date) => {
                return date.toLocaleDateString('en-US', {
                    month: 'long',
                    day: '2-digit',
                    year: 'numeric'
                });
            };

            const formatDateShort = (date) => {
                return date.toLocaleDateString('en-US', {
                    month: 'short',
                    day: '2-digit',
                    year: 'numeric'
                });
            };

            const getDayOfWeek = (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', { weekday: 'long' });
            };

            const showNotif = (message) => {
                setNotificationMessage(message);
                setShowNotification(true);
                setTimeout(() => setShowNotification(false), 3000);
            };

            const handleTimeIn = () => {
                const hasPendingRecord = records.some(record => !record.timeOut);
                
                if (hasPendingRecord) {
                    showNotif('Please log Time Out first');
                    return;
                }
                
                setShowTimeInConfirm(true);
            };

            const confirmTimeIn = () => {
                const now = new Date();
                setTimeInRecorded(now);
                setTimeOutRecorded(null);
                
                const newRecord = {
                    date: formatDateShort(now),
                    name: employeeName,
                    timeIn: formatTime(now),
                    timeOut: '',
                    id: Date.now(),
                    dayOfWeek: getDayOfWeek(now)
                };
                
                const updatedRecords = [newRecord, ...records];
                setRecords(updatedRecords);
                saveData(updatedRecords, employeeName);
                showNotif('Time In Recorded ‚úì');
                setShowTimeInConfirm(false);
            };

            const cancelTimeIn = () => {
                setShowTimeInConfirm(false);
            };

            const handleTimeOut = () => {
                setShowTimeOutConfirm(true);
            };

            const confirmTimeOut = () => {
                const now = new Date();
                
                const updatedRecords = [...records];
                const recordToUpdate = updatedRecords.find(record => !record.timeOut);
                
                if (recordToUpdate) {
                    recordToUpdate.timeOut = formatTime(now);
                    setTimeOutRecorded(now);
                    setRecords(updatedRecords);
                    saveData(updatedRecords, employeeName);
                    showNotif('Time Out Recorded ‚úì');
                } else {
                    showNotif('Please log Time In first');
                }
                setShowTimeOutConfirm(false);
            };

            const cancelTimeOut = () => {
                setShowTimeOutConfirm(false);
            };

            const handleEmployeeNameChange = (value) => {
                setEmployeeName(value);
                saveData(records, value);
            };

            const deleteRecord = (id) => {
                setRecordToDelete(id);
                setShowDeleteConfirm(true);
            };

            const confirmDelete = () => {
                if (recordToDelete) {
                    const updatedRecords = records.filter(record => record.id !== recordToDelete);
                    setRecords(updatedRecords);
                    saveData(updatedRecords, employeeName);
                    showNotif('Record deleted');
                    setShowDeleteConfirm(false);
                    setRecordToDelete(null);
                }
            };

            const cancelDelete = () => {
                setShowDeleteConfirm(false);
                setRecordToDelete(null);
            };

            const clearAllData = () => {
                setShowClearConfirm(true);
            };

            const confirmClearAll = () => {
                const updatedRecords = [];
                setRecords(updatedRecords);
                saveData(updatedRecords, employeeName);
                showNotif('All records cleared');
                setShowClearConfirm(false);
            };

            const cancelClearAll = () => {
                setShowClearConfirm(false);
            };

            const clearFilters = () => {
                setFilterDate('');
                setFilterDay('');
            };

            const filteredRecords = records.filter(record => {
                let matchesDate = true;
                let matchesDay = true;

                if (filterDate) {
                    const recordDate = new Date(record.date);
                    const selectedDate = new Date(filterDate);
                    matchesDate = recordDate.toDateString() === selectedDate.toDateString();
                }

                if (filterDay) {
                    matchesDay = record.dayOfWeek === filterDay;
                }

                return matchesDate && matchesDay;
            });

            const exportToExcel = () => {
                setShowExportConfirm(true);
            };

            const confirmExport = () => {
                const dataToExport = filteredRecords.length > 0 ? filteredRecords : records;
                let csv = 'DATE,DAY,NAME,TIME IN,TIME OUT\n';
                dataToExport.forEach(record => {
                    csv += `${record.date},${record.dayOfWeek || ''},${record.name},${record.timeIn},${record.timeOut || ''}\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                if (link.download !== undefined) {
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', 'time_tracking_records.csv');
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
                setShowExportConfirm(false);
                showNotif('‚úì Exported to Excel');
            };

            const cancelExport = () => {
                setShowExportConfirm(false);
            };

            if (isLoading) {
                return (
                    <div className="app-container bg-gray-50 flex items-center justify-center">
                        <div className="text-gray-600">Loading...</div>
                    </div>
                );
            }

            return (
                <div className="app-container bg-gray-50">
                    {showNotification && (
                        <div className="fixed top-4 left-4 right-4 bg-green-500 text-white px-4 py-3 rounded-xl shadow-lg z-50 text-center font-medium">
                            {notificationMessage}
                        </div>
                    )}

                    {showTimeInConfirm && (
                        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl">
                                <h3 className="text-xl font-bold text-gray-800 mb-3">Clock In Now?</h3>
                                <p className="text-gray-600 mb-6">Record your time in at {formatTime(new Date())}?</p>
                                <div className="flex gap-3">
                                    <button onClick={cancelTimeIn} className="flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl transition-colors font-medium">
                                        Cancel
                                    </button>
                                    <button onClick={confirmTimeIn} className="flex-1 px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors font-medium">
                                        Confirm
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showTimeOutConfirm && (
                        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl">
                                <h3 className="text-xl font-bold text-gray-800 mb-3">Clock Out Now?</h3>
                                <p className="text-gray-600 mb-6">Record your time out at {formatTime(new Date())}?</p>
                                <div className="flex gap-3">
                                    <button onClick={cancelTimeOut} className="flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl transition-colors font-medium">
                                        Cancel
                                    </button>
                                    <button onClick={confirmTimeOut} className="flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-800 text-white rounded-xl transition-colors font-medium">
                                        Confirm
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showExportConfirm && (
                        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl">
                                <h3 className="text-xl font-bold text-gray-800 mb-3">Export to Excel?</h3>
                                <p className="text-gray-600 mb-6">
                                    Export {filteredRecords.length > 0 && filteredRecords.length !== records.length 
                                        ? `${filteredRecords.length} filtered records` 
                                        : `${records.length} records`} to CSV file?
                                </p>
                                <div className="flex gap-3">
                                    <button onClick={cancelExport} className="flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl transition-colors font-medium">
                                        Cancel
                                    </button>
                                    <button onClick={confirmExport} className="flex-1 px-4 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-colors font-medium">
                                        Export
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showDeleteConfirm && (
                        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl">
                                <h3 className="text-xl font-bold text-gray-800 mb-3">Delete Record?</h3>
                                <p className="text-gray-600 mb-6">This action cannot be undone.</p>
                                <div className="flex gap-3">
                                    <button onClick={cancelDelete} className="flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl transition-colors font-medium">
                                        Cancel
                                    </button>
                                    <button onClick={confirmDelete} className="flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-colors font-medium">
                                        Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showClearConfirm && (
                        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl">
                                <h3 className="text-xl font-bold text-gray-800 mb-3">Clear All Records?</h3>
                                <p className="text-gray-600 mb-6">This will permanently delete all your time tracking data.</p>
                                <div className="flex gap-3">
                                    <button onClick={cancelClearAll} className="flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl transition-colors font-medium">
                                        Cancel
                                    </button>
                                    <button onClick={confirmClearAll} className="flex-1 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition-colors font-medium">
                                        Clear All
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showSettings && (
                        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl max-h-[90vh] overflow-y-auto">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">Cloud Sync Settings</h3>
                                
                                {syncEnabled ? (
                                    <div className="space-y-4">
                                        <div className="bg-green-50 border border-green-200 rounded-xl p-4">
                                            <p className="text-green-800 font-medium">‚úì Sync Enabled</p>
                                            <p className="text-green-600 text-sm mt-1">Your data syncs automatically</p>
                                            <div className="mt-3 text-xs text-gray-600 space-y-1 font-mono break-all">
                                                <p><span className="font-semibold">Gist ID:</span> {gistId}</p>
                                                <p><span className="font-semibold">Local Records:</span> {records.length}</p>
                                            </div>
                                            <a 
                                                href={`https://gist.github.com/${gistId}`}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                className="mt-2 inline-block text-xs text-blue-600 underline"
                                            >
                                                View your gist on GitHub ‚Üí
                                            </a>
                                        </div>
                                        
                                        <button 
                                            onClick={loadFromGitHub}
                                            disabled={isSyncing}
                                            className="w-full py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium disabled:bg-gray-300"
                                        >
                                            {isSyncing ? 'Loading...' : '‚Üì Load from Cloud'}
                                        </button>

                                        <button 
                                            onClick={() => syncToGitHub(records, employeeName)}
                                            disabled={isSyncing}
                                            className="w-full py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium disabled:bg-gray-300"
                                        >
                                            {isSyncing ? 'Uploading...' : '‚Üë Upload to Cloud Now'}
                                        </button>

                                        <div className="bg-blue-50 border border-blue-200 rounded-xl p-3 text-xs text-blue-800">
                                            <p className="font-semibold mb-1">üí° Tip:</p>
                                            <p>On new devices: Enter same token ‚Üí Click "Load from Cloud"</p>
                                        </div>
                                        
                                        <button 
                                            onClick={disableSync}
                                            className="w-full py-3 bg-red-50 hover:bg-red-100 text-red-600 rounded-xl font-medium"
                                        >
                                            Disable Sync
                                        </button>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        <div className="bg-blue-50 border border-blue-200 rounded-xl p-4 text-sm">
                                            <p className="font-bold text-blue-900 mb-3">üìã Step-by-Step Setup:</p>
                                            <ol className="space-y-2 text-blue-800">
                                                <li className="flex gap-2">
                                                    <span className="font-bold min-w-[20px]">1.</span>
                                                    <span>Open a new tab and go to:<br/>
                                                    <span className="font-mono text-xs bg-white px-2 py-1 rounded mt-1 inline-block">github.com/settings/tokens</span></span>
                                                </li>
                                                <li className="flex gap-2">
                                                    <span className="font-bold min-w-[20px]">2.</span>
                                                    <span>Click the blue button:<br/>
                                                    <span className="font-semibold">"Generate new token"</span> then select <span className="font-semibold">"Generate new token (classic)"</span></span>
                                                </li>
                                                <li className="flex gap-2">
                                                    <span className="font-bold min-w-[20px]">3.</span>
                                                    <span>Give it a name like:<br/>
                                                    <span className="font-mono text-xs bg-white px-2 py-1 rounded mt-1 inline-block">Time Tracking App</span></span>
                                                </li>
                                                <li className="flex gap-2">
                                                    <span className="font-bold min-w-[20px]">4.</span>
                                                    <span>Scroll down to permissions and <span className="font-bold">ONLY check the box for "gist"</span> (nothing else!)</span>
                                                </li>
                                                <li className="flex gap-2">
                                                    <span className="font-bold min-w-[20px]">5.</span>
                                                    <span>Scroll to bottom and click <span className="font-semibold">"Generate token"</span></span>
                                                </li>
                                                <li className="flex gap-2">
                                                    <span className="font-bold min-w-[20px]">6.</span>
                                                    <span>Copy the token (starts with "ghp_") and paste it below</span>
                                                </li>
                                            </ol>
                                            <div className="mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-xs">
                                                ‚ö†Ô∏è <span className="font-semibold">Important:</span> Never share your token with anyone! It's like a password.
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                GitHub Token (Private)
                                            </label>
                                            <textarea
                                                value={githubToken}
                                                onChange={(e) => setGithubToken(e.target.value)}
                                                placeholder="ghp_xxxxxxxxxxxx"
                                                className="w-full px-3 py-2 border-2 border-gray-200 rounded-xl text-sm"
                                                rows="3"
                                            />
                                            <p className="text-xs text-gray-500 mt-1">Token is stored only on your device</p>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                Gist ID (Optional - leave empty to create new)
                                            </label>
                                            <input
                                                type="text"
                                                value={gistId}
                                                onChange={(e) => setGistId(e.target.value)}
                                                placeholder="Leave empty for first device"
                                                className="w-full px-3 py-2 border-2 border-gray-200 rounded-xl text-sm"
                                            />
                                            <p className="text-xs text-gray-500 mt-1">
                                                üí° First device: Leave empty (creates new gist)<br/>
                                                üí° Other devices: Enter Gist ID from first device
                                            </p>
                                        </div>

                                        <button 
                                            onClick={setupSync}
                                            disabled={isSyncing || !githubToken}
                                            className="w-full py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium disabled:bg-gray-300"
                                        >
                                            {isSyncing ? 'Setting up...' : 'Enable Sync'}
                                        </button>
                                    </div>
                                )}

                                <button 
                                    onClick={() => setShowSettings(false)}
                                    className="w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl font-medium mt-3"
                                >
                                    Close
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Header */}
                    <div className="bg-blue-500 text-white p-4 shadow-lg">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <Clock />
                                <h1 className="text-xl font-bold">Time Tracking</h1>
                                {syncEnabled && !isSyncing && <Cloud />}
                                {isSyncing && <div className="text-xs">syncing...</div>}
                            </div>
                            <div className="flex gap-2">
                                <button onClick={() => setShowSettings(true)} className="p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">
                                    <Settings />
                                </button>
                                <button onClick={exportToExcel} className="p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">
                                    <Download />
                                </button>
                                <button onClick={clearAllData} className="p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">
                                    <Trash2 />
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="p-4 pb-20">
                        {/* Time Logging Card */}
                        <div className="bg-white rounded-2xl shadow-md p-5 mb-4">
                            <h2 className="text-lg font-bold text-gray-800 mb-4">Clock In/Out</h2>

                            <div className="mb-4">
                                <label className="block text-sm font-medium text-gray-700 mb-2">Your Name</label>
                                <input
                                    type="text"
                                    value={employeeName}
                                    onChange={(e) => handleEmployeeNameChange(e.target.value)}
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base"
                                />
                            </div>

                            {/* Clock Display */}
                            <div className="grid grid-cols-2 gap-3 mb-4">
                                <div className="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 text-center">
                                    <p className="text-xs text-gray-600 mb-1">Time In</p>
                                    <p className="text-2xl font-bold text-blue-600">
                                        {timeInRecorded ? formatTime(timeInRecorded) : formatTime(currentTime)}
                                    </p>
                                </div>
                                <div className="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 text-center">
                                    <p className="text-xs text-gray-600 mb-1">Time Out</p>
                                    <p className="text-2xl font-bold text-gray-600">
                                        {timeOutRecorded ? formatTime(timeOutRecorded) : formatTime(currentTime)}
                                    </p>
                                </div>
                            </div>

                            {/* Action Buttons */}
                            <div className="grid grid-cols-2 gap-3">
                                <button
                                    onClick={handleTimeIn}
                                    disabled={records.some(record => !record.timeOut)}
                                    className={`${records.some(record => !record.timeOut) ? 'bg-blue-300' : 'bg-blue-500 active:bg-blue-600'} text-white font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg`}
                                >
                                    <LogIn />
                                    <span>Time In</span>
                                </button>
                                <button
                                    onClick={handleTimeOut}
                                    disabled={!records.some(record => !record.timeOut)}
                                    className={`${!records.some(record => !record.timeOut) ? 'bg-gray-200 text-gray-400' : 'bg-gray-700 text-white active:bg-gray-800'} font-bold py-4 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg`}
                                >
                                    <LogOut />
                                    <span>Time Out</span>
                                </button>
                            </div>
                        </div>

                        {/* Records Section */}
                        <div className="bg-white rounded-2xl shadow-md p-5">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h2 className="text-lg font-bold text-gray-800">Records</h2>
                                    <p className="text-sm text-gray-600">
                                        {filteredRecords.length === records.length 
                                            ? `${records.length} total`
                                            : `${filteredRecords.length} of ${records.length}`}
                                    </p>
                                </div>
                                <button 
                                    onClick={() => setShowFilters(!showFilters)}
                                    className="p-2 bg-gray-100 rounded-lg"
                                >
                                    <Filter />
                                </button>
                            </div>

                            {/* Filters */}
                            {showFilters && (
                                <div className="bg-gray-50 p-4 rounded-xl mb-4">
                                    <div className="space-y-3">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                            <input
                                                type="date"
                                                value={filterDate}
                                                onChange={(e) => setFilterDate(e.target.value)}
                                                className="w-full px-3 py-2 border-2 border-gray-200 rounded-lg"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">Day</label>
                                            <select
                                                value={filterDay}
                                                onChange={(e) => setFilterDay(e.target.value)}
                                                className="w-full px-3 py-2 border-2 border-gray-200 rounded-lg"
                                            >
                                                <option value="">All Days</option>
                                                <option value="Monday">Monday</option>
                                                <option value="Tuesday">Tuesday</option>
                                                <option value="Wednesday">Wednesday</option>
                                                <option value="Thursday">Thursday</option>
                                                <option value="Friday">Friday</option>
                                                <option value="Saturday">Saturday</option>
                                                <option value="Sunday">Sunday</option>
                                            </select>
                                        </div>
                                        <button onClick={clearFilters} className="w-full py-2 bg-gray-200 hover:bg-gray-300 rounded-lg font-medium flex items-center justify-center gap-2">
                                            <X />
                                            Clear Filters
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Records List */}
                            {filteredRecords.length === 0 ? (
                                <div className="text-center py-12 text-gray-400">
                                    {records.length === 0 
                                        ? 'No records yet'
                                        : 'No matching records'}
                                </div>
                            ) : (
                                <div className="space-y-3">
                                    {filteredRecords.map((record) => (
                                        <div key={record.id} className="bg-gray-50 rounded-xl p-4">
                                            <div className="flex justify-between items-start mb-2">
                                                <div>
                                                    <p className="font-bold text-gray-800">{record.name}</p>
                                                    <p className="text-sm text-gray-600">{record.date} ‚Ä¢ {record.dayOfWeek}</p>
                                                </div>
                                                <button onClick={() => deleteRecord(record.id)} className="text-red-500 p-2">
                                                    <Trash2 />
                                                </button>
                                            </div>
                                            <div className="flex gap-4 text-sm">
                                                <div>
                                                    <span className="text-gray-500">In:</span>
                                                    <span className="font-semibold text-gray-800 ml-1">{record.timeIn}</span>
                                                </div>
                                                <div>
                                                    <span className="text-gray-500">Out:</span>
                                                    <span className="font-semibold text-gray-800 ml-1">
                                                        {record.timeOut || <span className="text-orange-500">Pending</span>}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<BiometricTimeTracking />, document.getElementById('root'));
    </script>
</body>
</html>
